{"code":"import { __awaiter, __generator } from \"tslib\";\r\nimport { getUserToken } from './storage';\r\nexport var authFetchUser = function (_a) {\r\n    var endpoint = _a.endpoint, body = _a.body, method = _a.method;\r\n    return __awaiter(void 0, void 0, void 0, function () {\r\n        var token, headers, response;\r\n        return __generator(this, function (_b) {\r\n            switch (_b.label) {\r\n                case 0:\r\n                    token = getUserToken();\r\n                    if (!token) {\r\n                        return [2 /*return*/, null];\r\n                    }\r\n                    headers = {\r\n                        'Content-Type': 'application/json',\r\n                        Authorization: \"Bearer \".concat(token),\r\n                    };\r\n                    console.log('fetch params are', endpoint, {\r\n                        method: method,\r\n                        headers: headers,\r\n                        body: JSON.stringify(body),\r\n                    });\r\n                    return [4 /*yield*/, fetch(endpoint, {\r\n                            method: method,\r\n                            headers: headers,\r\n                            body: JSON.stringify(body),\r\n                        })];\r\n                case 1:\r\n                    response = _b.sent();\r\n                    return [4 /*yield*/, response.json()];\r\n                case 2: return [2 /*return*/, _b.sent()];\r\n            }\r\n        });\r\n    });\r\n};\r\n//# sourceMappingURL=authFetch.js.map","references":["/Users/tansonlee/coding/notifyr/notifyr-sdk/src/lib/storage.ts"],"map":"{\"version\":3,\"file\":\"authFetch.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/lib/authFetch.ts\"],\"names\":[],\"mappings\":\";AAAA,OAAO,EAAE,YAAY,EAAE,MAAM,WAAW,CAAC;AAEzC,MAAM,CAAC,IAAM,aAAa,GAAG,UAAO,EAQnC;QAPA,QAAQ,cAAA,EACR,IAAI,UAAA,EACJ,MAAM,YAAA;;;;;;oBAMA,KAAK,GAAG,YAAY,EAAE,CAAC;oBAC7B,IAAI,CAAC,KAAK,EAAE;wBACX,sBAAO,IAAI,EAAC;qBACZ;oBAEK,OAAO,GAAG;wBACf,cAAc,EAAE,kBAAkB;wBAClC,aAAa,EAAE,iBAAU,KAAK,CAAE;qBAChC,CAAC;oBAEF,OAAO,CAAC,GAAG,CAAC,kBAAkB,EAAE,QAAQ,EAAE;wBACzC,MAAM,QAAA;wBACN,OAAO,SAAA;wBACP,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC;qBAC1B,CAAC,CAAC;oBAEc,qBAAM,KAAK,CAAC,QAAQ,EAAE;4BACtC,MAAM,QAAA;4BACN,OAAO,SAAA;4BACP,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC;yBAC1B,CAAC,EAAA;;oBAJI,QAAQ,GAAG,SAIf;oBAEK,qBAAM,QAAQ,CAAC,IAAI,EAAE,EAAA;wBAA5B,sBAAO,SAAqB,EAAC;;;;CAC7B,CAAC\"}","dts":{"name":"/Users/tansonlee/coding/notifyr/notifyr-sdk/node_modules/.cache/rollup-plugin-typescript2/placeholder/lib/authFetch.d.ts","writeByteOrderMark":false,"text":"export declare const authFetchUser: ({ endpoint, body, method, }: {\r\n    endpoint: string;\r\n    method: string;\r\n    body?: any;\r\n}) => Promise<any>;\r\n"}}
