{"code":"import { __awaiter, __generator } from \"tslib\";\r\nimport * as React from 'react';\r\nimport { authFetchUser } from '../lib/authFetch';\r\nimport { storeUserToken } from '../lib/storage';\r\nexport var NotificationMenu = function (_a) {\r\n    var apiKey = _a.apiKey;\r\n    React.useEffect(function () {\r\n        (function () { return __awaiter(void 0, void 0, void 0, function () {\r\n            var response, _a, token, error, _b, notifications, errors;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0: return [4 /*yield*/, fetch('http://localhost:3001/api/auth/get-token', {\r\n                            method: 'POST',\r\n                            headers: {\r\n                                'Content-Type': 'application/json',\r\n                            },\r\n                            body: JSON.stringify({\r\n                                apiKey: apiKey,\r\n                            }),\r\n                        })];\r\n                    case 1:\r\n                        response = _c.sent();\r\n                        return [4 /*yield*/, response.json()];\r\n                    case 2:\r\n                        _a = _c.sent(), token = _a.token, error = _a.error;\r\n                        if (error) {\r\n                            console.error(error);\r\n                            return [2 /*return*/];\r\n                        }\r\n                        console.log('token recieved is', token);\r\n                        storeUserToken(token);\r\n                        return [4 /*yield*/, authFetchUser({\r\n                                endpoint: \"http://localhost:3001/api/notification/get-notifications?groupId=test\",\r\n                                method: 'GET',\r\n                            })];\r\n                    case 3:\r\n                        _b = _c.sent(), notifications = _b.notifications, errors = _b.errors;\r\n                        if (errors) {\r\n                            console.error(errors);\r\n                            return [2 /*return*/];\r\n                        }\r\n                        console.log({ notifications: notifications });\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        }); })();\r\n    }, []);\r\n    return (React.createElement(\"div\", null,\r\n        React.createElement(\"p\", null, apiKey),\r\n        React.createElement(\"p\", null, \"Notifications are\")));\r\n};\r\n//# sourceMappingURL=NotificationMenu.js.map","references":["/Users/tansonlee/coding/notifyr/notifyr-sdk/node_modules/@types/react/index.d.ts","/Users/tansonlee/coding/notifyr/notifyr-sdk/src/lib/authFetch.ts","/Users/tansonlee/coding/notifyr/notifyr-sdk/src/lib/storage.ts"],"map":"{\"version\":3,\"file\":\"NotificationMenu.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/components/NotificationMenu.tsx\"],\"names\":[],\"mappings\":\";AAAA,OAAO,KAAK,KAAK,MAAM,OAAO,CAAC;AAC/B,OAAO,EAAE,aAAa,EAAE,MAAM,kBAAkB,CAAC;AACjD,OAAO,EAAE,cAAc,EAAE,MAAM,gBAAgB,CAAC;AAEhD,MAAM,CAAC,IAAM,gBAAgB,GAAG,UAAC,EAA8B;QAA5B,MAAM,YAAA;IACxC,KAAK,CAAC,SAAS,CAAC;QACf,CAAC;;;;4BACiB,qBAAM,KAAK,CAAC,0CAA0C,EAAE;4BACxE,MAAM,EAAE,MAAM;4BACd,OAAO,EAAE;gCACR,cAAc,EAAE,kBAAkB;6BAClC;4BACD,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC;gCACpB,MAAM,QAAA;6BACN,CAAC;yBACF,CAAC,EAAA;;wBARI,QAAQ,GAAG,SAQf;wBAEuB,qBAAM,QAAQ,CAAC,IAAI,EAAE,EAAA;;wBAAxC,KAAmB,SAAqB,EAAtC,KAAK,WAAA,EAAE,KAAK,WAAA;wBAEpB,IAAI,KAAK,EAAE;4BACV,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;4BACrB,sBAAO;yBACP;wBAED,OAAO,CAAC,GAAG,CAAC,mBAAmB,EAAE,KAAK,CAAC,CAAC;wBAExC,cAAc,CAAC,KAAK,CAAC,CAAC;wBAEY,qBAAM,aAAa,CAAC;gCACrD,QAAQ,EAAE,uEAAuE;gCACjF,MAAM,EAAE,KAAK;6BACb,CAAC,EAAA;;wBAHI,KAA4B,SAGhC,EAHM,aAAa,mBAAA,EAAE,MAAM,YAAA;wBAI7B,IAAI,MAAM,EAAE;4BACX,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;4BACtB,sBAAO;yBACP;wBAED,OAAO,CAAC,GAAG,CAAC,EAAE,aAAa,eAAA,EAAE,CAAC,CAAC;;;;aAC/B,CAAC,EAAE,CAAC;IACN,CAAC,EAAE,EAAE,CAAC,CAAC;IAEP,OAAO,CACN;QACC,+BAAI,MAAM,CAAK;QACf,mDAAwB,CACnB,CACN,CAAC;AACH,CAAC,CAAC\"}","dts":{"name":"/Users/tansonlee/coding/notifyr/notifyr-sdk/node_modules/.cache/rollup-plugin-typescript2/placeholder/components/NotificationMenu.d.ts","writeByteOrderMark":false,"text":"/// <reference types=\"react\" />\r\nexport declare const NotificationMenu: ({ apiKey }: {\r\n    apiKey: string;\r\n}) => JSX.Element;\r\n"}}
