{"code":"import { __awaiter, __generator } from \"tslib\";\r\nimport { api_endpoint } from '../constants';\r\nimport { authenticate } from './authenticate';\r\nimport { authFetchUser } from './authFetch';\r\nexport var getNotificationsByGroupId = function (_a) {\r\n    var apiKey = _a.apiKey, groupId = _a.groupId;\r\n    return __awaiter(void 0, void 0, void 0, function () {\r\n        var _b, notifications, errors;\r\n        return __generator(this, function (_c) {\r\n            switch (_c.label) {\r\n                case 0: return [4 /*yield*/, authenticate(apiKey)];\r\n                case 1:\r\n                    _c.sent();\r\n                    return [4 /*yield*/, authFetchUser({\r\n                            endpoint: \"\".concat(api_endpoint, \"/api/notification/get-notifications?groupId=\").concat(groupId),\r\n                            method: 'GET',\r\n                        })];\r\n                case 2:\r\n                    _b = _c.sent(), notifications = _b.notifications, errors = _b.errors;\r\n                    if (errors) {\r\n                        console.error(errors);\r\n                        return [2 /*return*/, []];\r\n                    }\r\n                    return [2 /*return*/, notifications];\r\n            }\r\n        });\r\n    });\r\n};\r\nexport var getNotificationsByClientSecret = function (_a) {\r\n    var clientSecret = _a.clientSecret;\r\n    return __awaiter(void 0, void 0, void 0, function () {\r\n        var response, _b, groupId, apiKey, _c, notifications, errors;\r\n        return __generator(this, function (_d) {\r\n            switch (_d.label) {\r\n                case 0: return [4 /*yield*/, fetch(\"\".concat(api_endpoint, \"/api/auth/decode-token\"), {\r\n                        method: 'POST',\r\n                        headers: {\r\n                            'Content-Type': 'application/json',\r\n                        },\r\n                        body: JSON.stringify({\r\n                            clientSecret: clientSecret,\r\n                        }),\r\n                    })];\r\n                case 1:\r\n                    response = _d.sent();\r\n                    return [4 /*yield*/, response.json()];\r\n                case 2:\r\n                    _b = _d.sent(), groupId = _b.groupId, apiKey = _b.apiKey;\r\n                    return [4 /*yield*/, authenticate(apiKey)];\r\n                case 3:\r\n                    _d.sent();\r\n                    return [4 /*yield*/, authFetchUser({\r\n                            endpoint: \"\".concat(api_endpoint, \"/api/notification/get-notifications?groupId=\").concat(groupId),\r\n                            method: 'GET',\r\n                        })];\r\n                case 4:\r\n                    _c = _d.sent(), notifications = _c.notifications, errors = _c.errors;\r\n                    if (errors) {\r\n                        console.error(errors);\r\n                        return [2 /*return*/, []];\r\n                    }\r\n                    return [2 /*return*/, notifications];\r\n            }\r\n        });\r\n    });\r\n};\r\n//# sourceMappingURL=getNotifications.js.map","references":["/Users/tansonlee/coding/notifyr/notifyr-sdk/src/constants.ts","/Users/tansonlee/coding/notifyr/notifyr-sdk/src/lib/authenticate.ts","/Users/tansonlee/coding/notifyr/notifyr-sdk/src/lib/authFetch.ts"],"map":"{\"version\":3,\"file\":\"getNotifications.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/lib/getNotifications.ts\"],\"names\":[],\"mappings\":\";AAAA,OAAO,EAAE,YAAY,EAAE,MAAM,cAAc,CAAC;AAC5C,OAAO,EAAE,YAAY,EAAE,MAAM,gBAAgB,CAAC;AAC9C,OAAO,EAAE,aAAa,EAAE,MAAM,aAAa,CAAC;AAE5C,MAAM,CAAC,IAAM,yBAAyB,GAAG,UAAO,EAM/C;QALA,MAAM,YAAA,EACN,OAAO,aAAA;;;;;wBAKP,qBAAM,YAAY,CAAC,MAAM,CAAC,EAAA;;oBAA1B,SAA0B,CAAC;oBACO,qBAAM,aAAa,CAAC;4BACrD,QAAQ,EAAE,UAAG,YAAY,yDAA+C,OAAO,CAAE;4BACjF,MAAM,EAAE,KAAK;yBACb,CAAC,EAAA;;oBAHI,KAA4B,SAGhC,EAHM,aAAa,mBAAA,EAAE,MAAM,YAAA;oBAI7B,IAAI,MAAM,EAAE;wBACX,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;wBACtB,sBAAO,EAAE,EAAC;qBACV;oBAED,sBAAO,aAAa,EAAC;;;;CACrB,CAAC;AAEF,MAAM,CAAC,IAAM,8BAA8B,GAAG,UAAO,EAIpD;QAHA,YAAY,kBAAA;;;;;wBAIK,qBAAM,KAAK,CAAC,UAAG,YAAY,2BAAwB,EAAE;wBACrE,MAAM,EAAE,MAAM;wBACd,OAAO,EAAE;4BACR,cAAc,EAAE,kBAAkB;yBAClC;wBACD,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC;4BACpB,YAAY,cAAA;yBACZ,CAAC;qBACF,CAAC,EAAA;;oBARI,QAAQ,GAAG,SAQf;oBAC0B,qBAAM,QAAQ,CAAC,IAAI,EAAE,EAAA;;oBAA3C,KAAsB,SAAqB,EAAzC,OAAO,aAAA,EAAE,MAAM,YAAA;oBAEvB,qBAAM,YAAY,CAAC,MAAM,CAAC,EAAA;;oBAA1B,SAA0B,CAAC;oBACO,qBAAM,aAAa,CAAC;4BACrD,QAAQ,EAAE,UAAG,YAAY,yDAA+C,OAAO,CAAE;4BACjF,MAAM,EAAE,KAAK;yBACb,CAAC,EAAA;;oBAHI,KAA4B,SAGhC,EAHM,aAAa,mBAAA,EAAE,MAAM,YAAA;oBAI7B,IAAI,MAAM,EAAE;wBACX,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;wBACtB,sBAAO,EAAE,EAAC;qBACV;oBAED,sBAAO,aAAa,EAAC;;;;CACrB,CAAC\"}","dts":{"name":"/Users/tansonlee/coding/notifyr/notifyr-sdk/node_modules/.cache/rollup-plugin-typescript2/placeholder/lib/getNotifications.d.ts","writeByteOrderMark":false,"text":"export declare const getNotificationsByGroupId: ({ apiKey, groupId, }: {\r\n    groupId: string;\r\n    apiKey: string;\r\n}) => Promise<any>;\r\nexport declare const getNotificationsByClientSecret: ({ clientSecret, }: {\r\n    clientSecret: string;\r\n}) => Promise<any>;\r\n"}}
